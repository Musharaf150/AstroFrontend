---
import { Image } from "astro:assets";
import Layout from "../../layouts/Layout.astro";
import Marked from "../../components/Marked.astro";
import fetchApi from "../../lib/strapi";

export async function getStaticPaths() {
    try {
        const articles = await fetchApi({
        endpoint: 'blogs',
        wrappedByKey: 'data',
    });
    return articles.length > 0 ? articles.map((article)=>({
        params: {
            slug: article.slug
        },
        props: article
    })): [];
    } catch (error) {
        console.error("Error fetching blog articles:", error);
        return [];
    }
}
const article = Astro.props;
---

<Layout>
    {article ? (
    <Image src={`${article.image[0].url}`}
    alt={article.title}
    height="400"
    width="400"/>
<h1>{article.title}</h1>
<Marked content={article.content}/>
    ):
    <div>
        No Data Found!!!
    </div>
    }
</Layout>